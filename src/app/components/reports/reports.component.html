<div class="w-full h-full flex flex-col px-2 sm:px-4">
  <form
    [formGroup]="reportParamsForm"
    class="flex flex-col gap-4"
    (ngSubmit)="consultarReporte()"
  >
    <!-- Select -->
    <div class="flex flex-col">
      <select
        name="typeReport"
        id="typeReport"
        formControlName="tipoReporte"
        class="h-10 w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-lg hover:cursor-pointer mt-3"
      >
        <option value="00" selected disabled>Seleccionar Reporte</option>
        <option value="1">Todos los Productos</option>
        <option value="2">Ventas Dia Actual</option>
        <option value="3">Ventas Rango de Fechas</option>
        <option value="4">Productos Agotados</option>
        <option value="5">Productos Proximos a Agotarse</option>
        <option value="6">Devoluciones</option>
      </select>
    </div>

    <!-- Inputs + botones -->
    <div class="flex flex-col sm:flex-row gap-3">
      <input
        type="date"
        id="fechaInicio"
        formControlName="fechaInicio"
        class="w-full sm:w-[15vw] h-10 bg-gray-50 border border-gray-300 text-gray-900 rounded-lg"
      />

      <input
        type="date"
        name="fechaFinal"
        formControlName="fechaFinal"
        id="fechaFinal"
        class="w-full sm:w-[15vw] h-10 bg-gray-50 border border-gray-300 text-gray-900 rounded-lg"
      />

      <button
        type="submit"
        class="w-full sm:w-[15vw] bg-sky-900 text-white py-2 rounded-md hover:bg-sky-600"
      >
        Consultar
      </button>

      <button
        class="w-full sm:w-[15vw] bg-green-700 text-white px-4 py-2 rounded-md hover:bg-green-500"
        (click)="descargarExcel()"
      >
        Descargar Excel
      </button>
    </div>
  </form>

  <!-- Tabla -->
  <div class="w-full border border-gray-300 mt-5 overflow-x-auto pl-2">
    <ngx-datatable
      class="material custom-datatable min-w-[600px] ml-2"
      [rows]="tableRows"
      [loadingIndicator]="tableLoadingIndicator"
      [columns]="tableColumns"
      [columnMode]="tableColumnMode.force"
      [headerHeight]="50"
      [footerHeight]="50"
      [rowHeight]="40"
      [scrollbarH]="true"
      [limit]="10"
      [messages]="tableMessage"
      [count]="tableCount"
      [offset]="tableOffset"
      (page)="onPage($event)"
    >
      <ngx-datatable-column
        *ngFor="let col of tableColumns"
        [prop]="col"
        [flexGrow]="1.0"
        [resizeable]="true"
      >
      </ngx-datatable-column>
    </ngx-datatable>
  </div>
</div>
